{"ast":null,"code":"// import React, { useEffect, useState } from 'react';\n// import API from '../api';\n// import { Link } from 'react-router-dom';\n// import '../styles/MovieList.css'; // <-- Add this line\n\n// export default function MovieList(){\n//   const [movies, setMovies] = useState([]);\n//   const [page, setPage] = useState(1);\n//   const [next, setNext] = useState(null);\n//   const [prev, setPrev] = useState(null);\n\n//   const fetchMovies = async (p=1) => {\n//     try{\n//       const res = await API.get(`movies/?page=${p}`);\n//       setMovies(res.data.results);\n//       setNext(res.data.next);\n//       setPrev(res.data.previous);\n//       setPage(p);\n//     }catch(err){\n//       console.error(err);\n//     }\n//   }\n\n//   useEffect(()=>{\n//     fetchMovies(1);\n//   },[]);\n\n//   // Listen for a custom event when a new movie is added\n//   useEffect(()=>{\n//     const handler = () => fetchMovies(1);\n//     window.addEventListener('movie:added', handler);\n//     return () => window.removeEventListener('movie:added', handler);\n//   },[]);\n\n//   return (\n//     <div className=\"movie-list\">\n//       <h2>Movies</h2>\n//       <div className=\"grid\">\n//         {movies.map(m => (\n//           <div className=\"card\" key={m.id}>\n//             <Link to={`/movie/${m.id}`}>\n//               {m.poster ? <img src={m.poster} alt={m.title} /> : <div className=\"placeholder\">No Image</div>}\n//               <h3>{m.title}</h3>\n//             </Link>\n//             <p>Rating: {m.rating || 'N/A'}</p>\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"pagination\">\n//         <button onClick={() => fetchMovies(page - 1)} disabled={!prev}>Previous</button>\n//         <span>Page {page}</span>\n//         <button onClick={() => fetchMovies(page + 1)} disabled={!next}>Next</button>\n//       </div>\n//     </div>\n//   )\n// }\n\n// import React, { useEffect, useState } from \"react\";\n// import API from \"../api\";\n// import \"../styles/MovieList.css\";\n\n// export default function MovieList() {\n//   const [movies, setMovies] = useState([]);\n\n//   const fetchMovies = async () => {\n//     try {\n//       const res = await API.get(\"movies/\");\n//       if (Array.isArray(res.data)) setMovies(res.data);\n//       else if (Array.isArray(res.data.results)) setMovies(res.data.results);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchMovies();\n//     window.addEventListener(\"movie:added\", fetchMovies);\n//     return () => window.removeEventListener(\"movie:added\", fetchMovies);\n//   }, []);\n\n//   const deleteMovie = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this movie?\")) return;\n//     try {\n//       await API.delete(`movies/${id}/`);\n//       fetchMovies();\n//     } catch (err) {\n//       console.error(err);\n//     }\n//   };\n\n//   return (\n//     <div className=\"movie-list\">\n//       {movies.length === 0 ? (\n//         <p>No movies found.</p>\n//       ) : (\n//         movies.map((movie) => (\n//           <div className=\"movie-card\" key={movie.id}>\n//             {movie.poster && (\n//               <img src={movie.poster} alt={movie.title} className=\"poster-img\" />\n//             )}\n//             <h3>{movie.title}</h3>\n//             <p>{movie.description}</p>\n//             <p><b>Rating:</b> {movie.rating}</p>\n\n//             <button className=\"delete-btn\" onClick={() => deleteMovie(movie.id)}>\n//               Delete\n//             </button>\n//           </div>\n//         ))\n//       )}\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["/home/vinod/Downloads/Learn_Project/movie_project/frontend/src/components/MovieList.jsx"],"sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import API from '../api';\n// import { Link } from 'react-router-dom';\n// import '../styles/MovieList.css'; // <-- Add this line\n\n\n// export default function MovieList(){\n//   const [movies, setMovies] = useState([]);\n//   const [page, setPage] = useState(1);\n//   const [next, setNext] = useState(null);\n//   const [prev, setPrev] = useState(null);\n\n//   const fetchMovies = async (p=1) => {\n//     try{\n//       const res = await API.get(`movies/?page=${p}`);\n//       setMovies(res.data.results);\n//       setNext(res.data.next);\n//       setPrev(res.data.previous);\n//       setPage(p);\n//     }catch(err){\n//       console.error(err);\n//     }\n//   }\n\n//   useEffect(()=>{\n//     fetchMovies(1);\n//   },[]);\n\n//   // Listen for a custom event when a new movie is added\n//   useEffect(()=>{\n//     const handler = () => fetchMovies(1);\n//     window.addEventListener('movie:added', handler);\n//     return () => window.removeEventListener('movie:added', handler);\n//   },[]);\n\n//   return (\n//     <div className=\"movie-list\">\n//       <h2>Movies</h2>\n//       <div className=\"grid\">\n//         {movies.map(m => (\n//           <div className=\"card\" key={m.id}>\n//             <Link to={`/movie/${m.id}`}>\n//               {m.poster ? <img src={m.poster} alt={m.title} /> : <div className=\"placeholder\">No Image</div>}\n//               <h3>{m.title}</h3>\n//             </Link>\n//             <p>Rating: {m.rating || 'N/A'}</p>\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"pagination\">\n//         <button onClick={() => fetchMovies(page - 1)} disabled={!prev}>Previous</button>\n//         <span>Page {page}</span>\n//         <button onClick={() => fetchMovies(page + 1)} disabled={!next}>Next</button>\n//       </div>\n//     </div>\n//   )\n// }\n\n\n// import React, { useEffect, useState } from \"react\";\n// import API from \"../api\";\n// import \"../styles/MovieList.css\";\n\n// export default function MovieList() {\n//   const [movies, setMovies] = useState([]);\n\n//   const fetchMovies = async () => {\n//     try {\n//       const res = await API.get(\"movies/\");\n//       if (Array.isArray(res.data)) setMovies(res.data);\n//       else if (Array.isArray(res.data.results)) setMovies(res.data.results);\n//     } catch (err) {\n//       console.log(err);\n//     }\n//   };\n\n//   useEffect(() => {\n//     fetchMovies();\n//     window.addEventListener(\"movie:added\", fetchMovies);\n//     return () => window.removeEventListener(\"movie:added\", fetchMovies);\n//   }, []);\n\n//   const deleteMovie = async (id) => {\n//     if (!window.confirm(\"Are you sure you want to delete this movie?\")) return;\n//     try {\n//       await API.delete(`movies/${id}/`);\n//       fetchMovies();\n//     } catch (err) {\n//       console.error(err);\n//     }\n//   };\n\n//   return (\n//     <div className=\"movie-list\">\n//       {movies.length === 0 ? (\n//         <p>No movies found.</p>\n//       ) : (\n//         movies.map((movie) => (\n//           <div className=\"movie-card\" key={movie.id}>\n//             {movie.poster && (\n//               <img src={movie.poster} alt={movie.title} className=\"poster-img\" />\n//             )}\n//             <h3>{movie.title}</h3>\n//             <p>{movie.description}</p>\n//             <p><b>Rating:</b> {movie.rating}</p>\n\n//             <button className=\"delete-btn\" onClick={() => deleteMovie(movie.id)}>\n//               Delete\n//             </button>\n//           </div>\n//         ))\n//       )}\n//     </div>\n//   );\n// }\n\n\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}