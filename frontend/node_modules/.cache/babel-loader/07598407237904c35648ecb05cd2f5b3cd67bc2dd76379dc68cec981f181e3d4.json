{"ast":null,"code":"var _jsxFileName = \"/home/vinod/Downloads/Learn_Project/movie_project/frontend/src/components/MovieList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState } from 'react';\n// import API from '../api';\n// import { Link } from 'react-router-dom';\n// import '../styles/MovieList.css'; // <-- Add this line\n\n// export default function MovieList(){\n//   const [movies, setMovies] = useState([]);\n//   const [page, setPage] = useState(1);\n//   const [next, setNext] = useState(null);\n//   const [prev, setPrev] = useState(null);\n\n//   const fetchMovies = async (p=1) => {\n//     try{\n//       const res = await API.get(`movies/?page=${p}`);\n//       setMovies(res.data.results);\n//       setNext(res.data.next);\n//       setPrev(res.data.previous);\n//       setPage(p);\n//     }catch(err){\n//       console.error(err);\n//     }\n//   }\n\n//   useEffect(()=>{\n//     fetchMovies(1);\n//   },[]);\n\n//   // Listen for a custom event when a new movie is added\n//   useEffect(()=>{\n//     const handler = () => fetchMovies(1);\n//     window.addEventListener('movie:added', handler);\n//     return () => window.removeEventListener('movie:added', handler);\n//   },[]);\n\n//   return (\n//     <div className=\"movie-list\">\n//       <h2>Movies</h2>\n//       <div className=\"grid\">\n//         {movies.map(m => (\n//           <div className=\"card\" key={m.id}>\n//             <Link to={`/movie/${m.id}`}>\n//               {m.poster ? <img src={m.poster} alt={m.title} /> : <div className=\"placeholder\">No Image</div>}\n//               <h3>{m.title}</h3>\n//             </Link>\n//             <p>Rating: {m.rating || 'N/A'}</p>\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"pagination\">\n//         <button onClick={() => fetchMovies(page - 1)} disabled={!prev}>Previous</button>\n//         <span>Page {page}</span>\n//         <button onClick={() => fetchMovies(page + 1)} disabled={!next}>Next</button>\n//       </div>\n//     </div>\n//   )\n// }\n\nimport React, { useState, useEffect } from 'react';\nimport API from '../api';\nimport '../styles/MovieList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieList() {\n  _s();\n  const [movies, setMovies] = useState([]); // ✅ Start as empty array\n\n  const fetchMovies = async () => {\n    try {\n      const res = await API.get('movies/');\n      console.log(\"API Data:\", res.data);\n\n      // ✅ CASE 1: If API returns array directly:\n      if (Array.isArray(res.data)) {\n        setMovies(res.data);\n      }\n      // ✅ CASE 2: If API returns { results: [...] }\n      else if (Array.isArray(res.data.results)) {\n        setMovies(res.data.results);\n      }\n      // ✅ CASE 3: If API returns { data: [...] }\n      else if (Array.isArray(res.data.data)) {\n        setMovies(res.data.data);\n      } else {\n        console.error(\"Unexpected API format:\", res.data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching movies:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchMovies();\n    window.addEventListener(\"movie:added\", fetchMovies);\n    return () => window.removeEventListener(\"movie:added\", fetchMovies);\n  }, []);\n  const deleteMovie = async id => {\n    if (window.confirm(\"Are you sure you want to delete this movie?\")) {\n      try {\n        await API.delete(`movies/${id}/`);\n        fetchMovies();\n      } catch (err) {\n        console.error(err);\n        alert(\"Error deleting movie\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movie-list\",\n    children: movies.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No movies yet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 30\n    }, this) : movies.map(movie => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: movie.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), movie.poster && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: movie.poster,\n        alt: movie.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: movie.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Rating:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 14\n        }, this), \" \", movie.rating]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => deleteMovie(movie.id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)]\n    }, movie.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n_s(MovieList, \"MO6b3PSP3RIUqZ8gtSrBZBVtBbs=\");\n_c = MovieList;\nvar _c;\n$RefreshReg$(_c, \"MovieList\");","map":{"version":3,"names":["React","useState","useEffect","API","jsxDEV","_jsxDEV","MovieList","_s","movies","setMovies","fetchMovies","res","get","console","log","data","Array","isArray","results","error","window","addEventListener","removeEventListener","deleteMovie","id","confirm","delete","err","alert","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","map","movie","title","poster","src","alt","description","rating","onClick","_c","$RefreshReg$"],"sources":["/home/vinod/Downloads/Learn_Project/movie_project/frontend/src/components/MovieList.jsx"],"sourcesContent":["// import React, { useEffect, useState } from 'react';\n// import API from '../api';\n// import { Link } from 'react-router-dom';\n// import '../styles/MovieList.css'; // <-- Add this line\n\n\n// export default function MovieList(){\n//   const [movies, setMovies] = useState([]);\n//   const [page, setPage] = useState(1);\n//   const [next, setNext] = useState(null);\n//   const [prev, setPrev] = useState(null);\n\n//   const fetchMovies = async (p=1) => {\n//     try{\n//       const res = await API.get(`movies/?page=${p}`);\n//       setMovies(res.data.results);\n//       setNext(res.data.next);\n//       setPrev(res.data.previous);\n//       setPage(p);\n//     }catch(err){\n//       console.error(err);\n//     }\n//   }\n\n//   useEffect(()=>{\n//     fetchMovies(1);\n//   },[]);\n\n//   // Listen for a custom event when a new movie is added\n//   useEffect(()=>{\n//     const handler = () => fetchMovies(1);\n//     window.addEventListener('movie:added', handler);\n//     return () => window.removeEventListener('movie:added', handler);\n//   },[]);\n\n//   return (\n//     <div className=\"movie-list\">\n//       <h2>Movies</h2>\n//       <div className=\"grid\">\n//         {movies.map(m => (\n//           <div className=\"card\" key={m.id}>\n//             <Link to={`/movie/${m.id}`}>\n//               {m.poster ? <img src={m.poster} alt={m.title} /> : <div className=\"placeholder\">No Image</div>}\n//               <h3>{m.title}</h3>\n//             </Link>\n//             <p>Rating: {m.rating || 'N/A'}</p>\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"pagination\">\n//         <button onClick={() => fetchMovies(page - 1)} disabled={!prev}>Previous</button>\n//         <span>Page {page}</span>\n//         <button onClick={() => fetchMovies(page + 1)} disabled={!next}>Next</button>\n//       </div>\n//     </div>\n//   )\n// }\n\n\nimport React, { useState, useEffect } from 'react';\nimport API from '../api';\nimport '../styles/MovieList.css';\n\nexport default function MovieList() {\n  const [movies, setMovies] = useState([]); // ✅ Start as empty array\n\n  const fetchMovies = async () => {\n    try {\n      const res = await API.get('movies/');\n      console.log(\"API Data:\", res.data);\n\n      // ✅ CASE 1: If API returns array directly:\n      if (Array.isArray(res.data)) {\n        setMovies(res.data);\n      }\n      // ✅ CASE 2: If API returns { results: [...] }\n      else if (Array.isArray(res.data.results)) {\n        setMovies(res.data.results);\n      }\n      // ✅ CASE 3: If API returns { data: [...] }\n      else if (Array.isArray(res.data.data)) {\n        setMovies(res.data.data);\n      } else {\n        console.error(\"Unexpected API format:\", res.data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching movies:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchMovies();\n    window.addEventListener(\"movie:added\", fetchMovies);\n    return () => window.removeEventListener(\"movie:added\", fetchMovies);\n  }, []);\n\n  const deleteMovie = async (id) => {\n    if (window.confirm(\"Are you sure you want to delete this movie?\")) {\n      try {\n        await API.delete(`movies/${id}/`);\n        fetchMovies();\n      } catch (err) {\n        console.error(err);\n        alert(\"Error deleting movie\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"movie-list\">\n      {movies.length === 0 ? <p>No movies yet</p> : movies.map((movie) => (\n        <div className=\"movie-card\" key={movie.id}>\n          <h3>{movie.title}</h3>\n          {movie.poster && (\n            <img src={movie.poster} alt={movie.title} />\n          )}\n          <p>{movie.description}</p>\n          <p><strong>Rating:</strong> {movie.rating}</p>\n          <button onClick={() => deleteMovie(movie.id)}>Delete</button>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}